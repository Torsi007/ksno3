<?xml version='1.0' encoding='UTF-8'?>

<!-- =========== FULL CONFIGURATION FILE ================================== -->

<faces-config version="1.2" 
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd">
    <application>
        <resource-bundle>
            <base-name>application</base-name>
            <var>prop</var>
        </resource-bundle>            
    </application>
   <!-- ******** DAO ****************************************************** -->
   <managed-bean>
        <managed-bean-name>PersonDao</managed-bean-name>
        <managed-bean-class>ksno.dao.hibernate.PersonDaoImpl</managed-bean-class>
        <managed-bean-scope>none</managed-bean-scope>
    </managed-bean>
   <managed-bean>
        <managed-bean-name>ArticleDao</managed-bean-name>
        <managed-bean-class>ksno.dao.hibernate.ArticleDaoImpl</managed-bean-class>
        <managed-bean-scope>none</managed-bean-scope>
    </managed-bean>      
   <managed-bean>
        <managed-bean-name>ImageDao</managed-bean-name>
        <managed-bean-class>ksno.dao.hibernate.ImageDaoImpl</managed-bean-class>
        <managed-bean-scope>none</managed-bean-scope>
    </managed-bean>   
   <!-- ******** Service *************************************************** -->
   <managed-bean>
        <managed-bean-name>PersonService</managed-bean-name>
        <managed-bean-class>ksno.service.PersonServiceImpl</managed-bean-class>
        <managed-bean-scope>none</managed-bean-scope>
        <managed-property>
            <property-name>personDao</property-name>
            <value>#{PersonDao}</value>
        </managed-property>        
    </managed-bean> 
   <managed-bean>
        <managed-bean-name>ArticleService</managed-bean-name>
        <managed-bean-class>ksno.service.ArticleServiceImpl</managed-bean-class>
        <managed-bean-scope>none</managed-bean-scope>
        <managed-property>
            <property-name>articleDao</property-name>
            <value>#{ArticleDao}</value>
        </managed-property>        
    </managed-bean>    
   <managed-bean>
        <managed-bean-name>ImageService</managed-bean-name>
        <managed-bean-class>ksno.service.ImageServiceImpl</managed-bean-class>
        <managed-bean-scope>none</managed-bean-scope>
        <managed-property>
            <property-name>imageDao</property-name>
            <value>#{ImageDao}</value>
        </managed-property>        
    </managed-bean>       
   <!-- ******** UI ******************************************************* -->    
    <managed-bean>
        <managed-bean-name>Main_Backing</managed-bean-name>
        <managed-bean-class>ksno.ui.jsf.backing.Main</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>Current_Backing</managed-bean-name>
        <managed-bean-class>ksno.ui.jsf.backing.Current</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
        <managed-property>
            <property-name>articleService</property-name>
            <value>#{ArticleService}</value>
        </managed-property>
    </managed-bean> 
    <managed-bean>
        <managed-bean-name>Article_Backing</managed-bean-name>
        <managed-bean-class>ksno.ui.jsf.backing.ViewArticle</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
        <managed-property>
            <property-name>articleService</property-name>
            <value>#{ArticleService}</value>
        </managed-property>
        <managed-property>
            <property-name>id</property-name>
            <value>#{param.id}</value>
        </managed-property>        
    </managed-bean>
    <managed-bean>
        <managed-bean-name>AdminArticle_Backing</managed-bean-name>
        <managed-bean-class>ksno.ui.jsf.backing.AdminArticle</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
        <managed-property>
            <property-name>articleService</property-name>
            <value>#{ArticleService}</value>
        </managed-property>
        <managed-property>
            <property-name>personService</property-name>
            <value>#{PersonService}</value>
        </managed-property>
        <managed-property>
            <property-name>imageService</property-name>
            <value>#{ImageService}</value>
        </managed-property>         
    </managed-bean>  
    <!-- ******** Navigation ******************************************************* -->    
    <navigation-rule>
        <from-view-id>/secureA/AdminArticles.jsp</from-view-id>
        <navigation-case>
            <from-outcome>CreateArticle</from-outcome>
            <to-view-id>/secureA/CreateArticle.jsp</to-view-id>
        </navigation-case>            
    </navigation-rule>    
    <navigation-rule>
        <from-view-id>/secureA/CreateArticle.jsp</from-view-id>
        <navigation-case>
            <from-action>#{AdminArticle_Backing.createArticle}</from-action>
            <from-outcome>go</from-outcome>
            <to-view-id>/secureA/AddArticleImages.jsp</to-view-id>
        </navigation-case>            
        <navigation-case>
            <from-outcome>Cancel</from-outcome>
            <to-view-id>/secureA/AdminArticles.jsp</to-view-id>
        </navigation-case>                    
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/secureA/AddArticleImages.jsp</from-view-id>
        <navigation-case>
            <from-action>#{AdminArticle_Backing.uploadImages}</from-action>            
            <from-outcome>go</from-outcome>
            <to-view-id>/secureA/UpdateArticle.jsp</to-view-id>
        </navigation-case>     
        <navigation-case>
            <from-outcome>go</from-outcome>
            <to-view-id>/secureA/UpdateArticle.jsp</to-view-id>
        </navigation-case>     
        <navigation-case>
            <from-outcome>nogo</from-outcome>
            <to-view-id>/secureA/AdminArticles.jsp</to-view-id>
        </navigation-case>     
    </navigation-rule>    
    <navigation-rule>
        <from-view-id>/secureA/UpdateArticle.jsp</from-view-id>
        <navigation-case>
            <from-action>#{AdminArticle_Backing.addArticleBody}</from-action>            
            <from-outcome>go</from-outcome>
            <to-view-id>/secureA/AdminArticles.jsp</to-view-id>
            <redirect/>
        </navigation-case>            
        <navigation-case>
            <from-action>#{AdminArticle_Backing.clearAndGotoImages}</from-action>            
            <from-outcome>go</from-outcome>
            <to-view-id>/secureA/AddArticleImages.jsp</to-view-id>
            <redirect/>
        </navigation-case>                    
        <navigation-case>
            <from-outcome>modify</from-outcome>
            <to-view-id>/secureA/CreateArticle.jsp</to-view-id>
            <redirect/>
        </navigation-case>         
    </navigation-rule>    
    <managed-bean>
        <managed-bean-name>SessionBean1</managed-bean-name>
        <managed-bean-class>ksno3.SessionBean1</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>ApplicationBean1</managed-bean-name>
        <managed-bean-class>ksno3.ApplicationBean1</managed-bean-class>
        <managed-bean-scope>application</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>RequestBean1</managed-bean-name>
        <managed-bean-class>ksno3.RequestBean1</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean>
</faces-config>
